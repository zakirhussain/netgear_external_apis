openapi: 3.0.3
info:
  title: Partner Organization Management API
  description: API for managing MSP (Managed Service Provider) partners, organizations, users, gateways, and subscriptions
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com

servers:
  - url: https://api.example.com/v1
    description: Production server
  - url: https://api-staging.example.com/v1
    description: Staging server

security:
  - SessionAuth: []

tags:
  - name: MSP
    description: MSP (Managed Service Provider) management operations
  - name: MSP Users
    description: MSP user management operations
  - name: Partner Tokens
    description: Partner session token management
  - name: Partner Organisations
    description: Partner organization management operations
  - name: Organisation Subscriptions
    description: Partner organization subscription management
  - name: Usage & Billing
    description: Usage and billing information
  - name: Organisation Sessions
    description: Partner organization session management
  - name: Organisation Gateways
    description: Partner organization gateway (CGW) management
  - name: Gateway Sessions
    description: Partner organization gateway session management

x-tagGroups:
  - name: Partner Management
    tags:
      - MSP
      - MSP Users
      - Partner Tokens
      - Partner Organisations
      - Organisation Subscriptions
      - Usage & Billing
      - Organisation Sessions
      - Organisation Gateways
      - Gateway Sessions

paths:
  # ==================== MSP CRUD ====================
  /msp:
    post:
      tags:
        - MSP
      summary: Create a new MSP
      description: Creates a new Managed Service Provider under the current partner
      operationId: createMSP
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePartnerInfoReq'
      responses:
        '200':
          description: MSP created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePartnerInfoRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    get:
      tags:
        - MSP
      summary: Get all MSPs
      description: Retrieves all MSPs under the current partner
      operationId: getAllMSP
      responses:
        '200':
          description: List of MSPs retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CreatePartnerInfoReq'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /msp/{mspid}:
    get:
      tags:
        - MSP
      summary: Get MSP by ID
      description: Retrieves a specific MSP by its ID
      operationId: getMSP
      parameters:
        - $ref: '#/components/parameters/MspId'
      responses:
        '200':
          description: MSP retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePartnerInfoReq'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - MSP
      summary: Update MSP
      description: Updates an existing MSP's information
      operationId: updateMSP
      parameters:
        - $ref: '#/components/parameters/MspId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdatePartnerInfoReq'
      responses:
        '200':
          description: MSP updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdatePartnerInfoReq'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - MSP
      summary: Delete MSP
      description: Deletes an existing MSP
      operationId: deleteMSP
      parameters:
        - $ref: '#/components/parameters/MspId'
      responses:
        '200':
          description: MSP deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== MSP User CRUD ====================
  /msp/user/{mspid}:
    post:
      tags:
        - MSP Users
      summary: Create MSP user
      description: Creates a new user for a specific MSP
      operationId: createMSPUser
      parameters:
        - $ref: '#/components/parameters/MspId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePartnerUserReq'
      responses:
        '200':
          description: MSP user created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePartnerUserResp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    get:
      tags:
        - MSP Users
      summary: Get all MSP users
      description: Retrieves all users for a specific MSP
      operationId: getMSPAllUsers
      parameters:
        - $ref: '#/components/parameters/MspId'
      responses:
        '200':
          description: List of MSP users retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GetPartnerUserResp'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /msp/user/{mspid}/{id}:
    get:
      tags:
        - MSP Users
      summary: Get MSP user by ID
      description: Retrieves a specific user from an MSP
      operationId: getMSPUser
      parameters:
        - $ref: '#/components/parameters/MspId'
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: MSP user retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetPartnerUserResp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - MSP Users
      summary: Update MSP user
      description: Updates an existing MSP user's information
      operationId: updateMSPUser
      parameters:
        - $ref: '#/components/parameters/MspId'
        - $ref: '#/components/parameters/UserId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreatePartnerUserReq'
      responses:
        '200':
          description: MSP user updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreatePartnerUserResp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - MSP Users
      summary: Delete MSP user
      description: Deletes an existing MSP user
      operationId: deleteMSPUser
      parameters:
        - $ref: '#/components/parameters/MspId'
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: MSP user deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Token ====================
  /partner/token:
    post:
      tags:
        - Partner Tokens
      summary: Generate partner session token
      description: Generates a new session token for partner authentication
      operationId: generatePartnerSessionToken
      responses:
        '200':
          description: Token generated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerToken'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Organisation CRUD ====================
  /partner/organisation:
    post:
      tags:
        - Partner Organisations
      summary: Create partner organization
      description: Creates a new organization under a partner
      operationId: createPartnerOrganisation
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgRequest'
      responses:
        '200':
          description: Organization created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisations:
    get:
      tags:
        - Partner Organisations
      summary: Get all partner organizations
      description: Retrieves all organizations under the current partner
      operationId: getPartnerAllOrganisations
      responses:
        '200':
          description: List of organizations retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PartnerOrgList'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/{orgid}:
    get:
      tags:
        - Partner Organisations
      summary: Get partner organization by ID
      description: Retrieves a specific organization by its ID
      operationId: getPartnerOrganisation
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: Organization retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - Partner Organisations
      summary: Update partner organization
      description: Updates an existing organization's information
      operationId: updatePartnerOrganisation
      parameters:
        - $ref: '#/components/parameters/OrgId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgRequest'
      responses:
        '200':
          description: Organization updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Partner Organisations
      summary: Delete partner organization
      description: Deletes an existing organization
      operationId: deletePartnerOrganisation
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: Organization deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Organisation Subscription ====================
  /partner/organisation/subscription/{orgid}:
    put:
      tags:
        - Organisation Subscriptions
      summary: Update partner organization subscription
      description: Updates the subscription details for an organization
      operationId: updatePartnerOrganisationSubscription
      parameters:
        - $ref: '#/components/parameters/OrgId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgSubUpdateRequest'
      responses:
        '200':
          description: Subscription updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/suspend/{orgid}:
    put:
      tags:
        - Organisation Subscriptions
      summary: Suspend partner organization
      description: Suspends an organization's services
      operationId: suspendPartnerOrganisation
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: Organization suspended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/activate/{orgid}:
    put:
      tags:
        - Organisation Subscriptions
      summary: Activate partner organization
      description: Activates a suspended organization's services
      operationId: activatePartnerOrganisation
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: Organization activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Usage & Billing ====================
  /partner/usage:
    get:
      tags:
        - Usage & Billing
      summary: Get partner billing usage
      description: Retrieves billing usage information for all organizations under the partner
      operationId: getPartnerBillingUsage
      responses:
        '200':
          description: Billing usage retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PartnerOrgsUsage'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/usage/{orgid}:
    get:
      tags:
        - Usage & Billing
      summary: Get partner organization usage
      description: Retrieves usage information for a specific organization
      operationId: getPartnerOrgUsage
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: Organization usage retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgsUsage'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Organisation Session ====================
  /partner/organisation/session/{orgid}:
    post:
      tags:
        - Organisation Sessions
      summary: Create partner organization session
      description: Creates a new session for accessing a partner organization
      operationId: createPartnerOrganisationSession
      parameters:
        - $ref: '#/components/parameters/OrgId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgSessionRequest'
      responses:
        '200':
          description: Session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgSessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/session/{sessionid}:
    put:
      tags:
        - Organisation Sessions
      summary: Update partner organization session
      description: Updates an existing organization session
      operationId: updatePartnerOrganisationSession
      parameters:
        - $ref: '#/components/parameters/SessionId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GatewaySessionRequest'
      responses:
        '200':
          description: Session updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgSessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Organisation Sessions
      summary: Delete partner organization session
      description: Deletes an existing organization session
      operationId: deletePartnerOrganisationSession
      parameters:
        - $ref: '#/components/parameters/SessionId'
      responses:
        '200':
          description: Session deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Organisation Gateway ====================
  /partner/organisation/gateway/{orgid}:
    post:
      tags:
        - Organisation Gateways
      summary: Create partner organization gateway
      description: Creates a new gateway (CGW) for an organization
      operationId: createPartnerOrgCGW
      parameters:
        - $ref: '#/components/parameters/OrgId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgCGWCreateReq'
      responses:
        '200':
          description: Gateway created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgCGWCreateRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    get:
      tags:
        - Organisation Gateways
      summary: Get all partner organization gateways
      description: Retrieves all gateways for a specific organization
      operationId: getPartnerOrgAllCGW
      parameters:
        - $ref: '#/components/parameters/OrgId'
      responses:
        '200':
          description: List of gateways retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PartnerOrgCGWInfo'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/gateway/{orgid}/{cgwid}:
    get:
      tags:
        - Organisation Gateways
      summary: Get partner organization gateway by ID
      description: Retrieves a specific gateway by its ID
      operationId: getPartnerOrgCGW
      parameters:
        - $ref: '#/components/parameters/OrgId'
        - $ref: '#/components/parameters/CgwId'
      responses:
        '200':
          description: Gateway retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgCGWInfo'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    put:
      tags:
        - Organisation Gateways
      summary: Update partner organization gateway
      description: Updates an existing gateway's configuration
      operationId: updatePartnerOrgCGW
      parameters:
        - $ref: '#/components/parameters/OrgId'
        - $ref: '#/components/parameters/CgwId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgCGWUpdateReq'
      responses:
        '200':
          description: Gateway updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Organisation Gateways
      summary: Delete partner organization gateway
      description: Deletes an existing gateway
      operationId: deletePartnerOrgCGW
      parameters:
        - $ref: '#/components/parameters/OrgId'
        - $ref: '#/components/parameters/CgwId'
      responses:
        '200':
          description: Gateway deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

  # ==================== Partner Organisation Gateway Session ====================
  /partner/organisation/gateway/session/{orgid}/{cgwid}:
    post:
      tags:
        - Gateway Sessions
      summary: Create partner organization gateway session
      description: Creates a new session for accessing an organization's gateway
      operationId: createPartnerOrgCgwSession
      parameters:
        - $ref: '#/components/parameters/OrgId'
        - $ref: '#/components/parameters/CgwId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartnerOrgSessionRequest'
      responses:
        '200':
          description: Gateway session created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgSessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /partner/organisation/gateway/session/{sessionid}/{cgwid}:
    put:
      tags:
        - Gateway Sessions
      summary: Update partner organization gateway session
      description: Updates an existing gateway session
      operationId: updatePartnerOrganisationGatewaySession
      parameters:
        - $ref: '#/components/parameters/SessionId'
        - $ref: '#/components/parameters/CgwId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GatewaySessionRequest'
      responses:
        '200':
          description: Gateway session updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartnerOrgSessionResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
    
    delete:
      tags:
        - Gateway Sessions
      summary: Delete partner organization gateway session
      description: Deletes an existing gateway session
      operationId: deletePartnerOrganisationGatewaySession
      parameters:
        - $ref: '#/components/parameters/SessionId'
        - $ref: '#/components/parameters/CgwId'
      responses:
        '200':
          description: Gateway session deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusCodeRsp'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'

# ==================== Components ====================
components:
  securitySchemes:
    SessionAuth:
      type: apiKey
      in: header
      name: X-Auth-Token
      description: Session token obtained after authentication

  parameters:
    MspId:
      name: mspid
      in: path
      required: true
      description: MSP identifier
      schema:
        type: string
        format: uuid
    
    UserId:
      name: id
      in: path
      required: true
      description: User identifier
      schema:
        type: string
        format: uuid
    
    OrgId:
      name: orgid
      in: path
      required: true
      description: Organization identifier
      schema:
        type: string
        format: uuid
    
    SessionId:
      name: sessionid
      in: path
      required: true
      description: Session identifier
      schema:
        type: string
        format: uuid
    
    CgwId:
      name: cgwid
      in: path
      required: true
      description: Gateway (CGW) identifier
      schema:
        type: string
        format: uuid

  schemas:
    # ==================== MSP Schemas ====================
    CreatePartnerInfoReq:
      type: object
      required:
        - email
        - name
        - firstName
        - lastName
      properties:
        email:
          type: string
          format: email
          description: MSP email address
          example: "msp@example.com"
        name:
          type: string
          description: MSP organization name
          example: "Example MSP"
        phone:
          type: string
          description: MSP phone number
          example: "+1-555-0123"
        firstName:
          type: string
          description: Primary contact first name
          example: "John"
        lastName:
          type: string
          description: Primary contact last name
          example: "Doe"
        addressCity:
          type: string
          description: City
          example: "New York"
        addressPostcode:
          type: string
          description: Postal/ZIP code
          example: "10001"
        addressCountry:
          type: string
          description: Country
          example: "United States"
        addressStateOrProvince:
          type: string
          description: State or province
          example: "NY"

    CreatePartnerInfoRsp:
      type: object
      properties:
        partnerName:
          type: string
          description: Created partner name
          example: "example-msp"
        partnerID:
          type: string
          format: uuid
          description: Created partner ID
          example: "123e4567-e89b-12d3-a456-426614174000"

    UpdatePartnerInfoReq:
      type: object
      properties:
        name:
          type: string
          description: MSP organization name
          example: "Updated MSP Name"
        phone:
          type: string
          description: MSP phone number
          example: "+1-555-0124"
        addressCity:
          type: string
          description: City
          example: "Los Angeles"
        addressPostcode:
          type: string
          description: Postal/ZIP code
          example: "90001"
        addressCountry:
          type: string
          description: Country
          example: "United States"
        addressStateOrProvince:
          type: string
          description: State or province
          example: "CA"

    # ==================== MSP User Schemas ====================
    CreatePartnerUserReq:
      type: object
      required:
        - firstName
        - lastName
        - email
        - role
      properties:
        firstName:
          type: string
          description: User first name
          example: "Jane"
        lastName:
          type: string
          description: User last name
          example: "Smith"
        email:
          type: string
          format: email
          description: User email address
          example: "jane.smith@example.com"
        phone:
          type: string
          description: User phone number
          example: "+1-555-0125"
        role:
          type: string
          description: User role
          example: "admin"
          enum:
            - admin
            - user
            - viewer

    CreatePartnerUserResp:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: User ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        firstName:
          type: string
          description: User first name
          example: "Jane"
        lastName:
          type: string
          description: User last name
          example: "Smith"
        email:
          type: string
          format: email
          description: User email address
          example: "jane.smith@example.com"
        phone:
          type: string
          description: User phone number
          example: "+1-555-0125"
        role:
          type: string
          description: User role
          example: "admin"

    GetPartnerUserResp:
      type: object
      properties:
        firstName:
          type: string
          description: User first name
          example: "Jane"
        lastName:
          type: string
          description: User last name
          example: "Smith"
        email:
          type: string
          format: email
          description: User email address
          example: "jane.smith@example.com"
        phone:
          type: string
          description: User phone number
          example: "+1-555-0125"
        role:
          type: string
          description: User role
          example: "admin"

    # ==================== Token Schemas ====================
    PartnerToken:
      type: object
      properties:
        token:
          type: string
          description: Generated session token
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        expiryDate:
          type: string
          format: date-time
          description: Token expiry date
          example: "2025-10-17T12:00:00Z"

    # ==================== Partner Organisation Schemas ====================
    PartnerOrgRequest:
      type: object
      required:
        - orgFullName
        - insightID
        - accountID
      properties:
        orgFullName:
          type: string
          description: Full name of the organization
          example: "Example Corporation"
        insightID:
          type: string
          description: Insight ID for the organization
          example: "INS-12345"
        accountID:
          type: string
          description: Account ID for the organization
          example: "ACC-67890"
        notifyEmails:
          type: array
          items:
            type: string
            format: email
          description: List of notification email addresses
          example: ["admin@example.com", "billing@example.com"]
        firstName:
          type: string
          description: Primary contact first name
          example: "Alice"
        lastName:
          type: string
          description: Primary contact last name
          example: "Johnson"
        userMail:
          type: string
          format: email
          description: Primary contact email
          example: "alice.johnson@example.com"
        phone:
          type: string
          description: Contact phone number
          example: "+1-555-0126"
        userName:
          type: string
          description: Username for the primary contact
          example: "ajohnson"
        addressCity:
          type: string
          description: City
          example: "San Francisco"
        addressPostcode:
          type: string
          description: Postal/ZIP code
          example: "94102"
        addressCountry:
          type: string
          description: Country
          example: "United States"
        addressStateOrProvince:
          type: string
          description: State or province
          example: "CA"
        instanceSize:
          type: string
          description: Size of the instance
          example: "medium"
          enum:
            - small
            - medium
            - large

    PartnerOrgResponse:
      type: object
      properties:
        orgTag:
          type: string
          description: Organization tag/name
          example: "example-corp"
        orgID:
          type: string
          format: uuid
          description: Organization ID
          example: "123e4567-e89b-12d3-a456-426614174001"
        trialExpiry:
          type: string
          format: date-time
          description: Trial expiry date
          example: "2025-12-31T23:59:59Z"

    PartnerOrgList:
      type: object
      properties:
        orgName:
          type: string
          description: Organization name
          example: "example-corp"
        orgTag:
          type: string
          description: Organization tag
          example: "example-corp"
        orgID:
          type: string
          format: uuid
          description: Organization ID
          example: "123e4567-e89b-12d3-a456-426614174001"

    # ==================== Subscription Schemas ====================
    PartnerOrgSubUpdateRequest:
      type: object
      required:
        - sase
      properties:
        state:
          type: string
          description: Subscription state
          example: "active"
          enum:
            - active
            - suspended
            - trial
        sase:
          type: string
          description: SASE tier
          example: "pro"
          enum:
            - essentials
            - pro

    # ==================== Usage Schemas ====================
    PartnerOrgUsageData:
      type: object
      required:
        - numofusers
        - numofgateways
        - sase
      properties:
        state:
          type: string
          description: Subscription state
          example: "active"
          enum:
            - active
            - suspended
            - trial
        numofusers:
          type: integer
          format: int32
          minimum: 0
          description: Number of users
          example: 100
        numofgateways:
          type: integer
          format: int32
          minimum: 0
          description: Number of gateways
          example: 5
        totaluserscost:
          type: number
          format: double
          description: Total cost for users
          example: 1000.00
        totalgwscost:
          type: number
          format: double
          description: Total cost for gateways
          example: 500.00
        sase:
          type: string
          description: SASE tier
          example: "pro"
          enum:
            - essentials
            - pro

    PartnerOrgsUsage:
      type: object
      properties:
        orgID:
          type: string
          format: uuid
          description: Organization ID
          example: "123e4567-e89b-12d3-a456-426614174001"
        insightID:
          type: string
          description: Insight ID
          example: "INS-12345"
        accountID:
          type: string
          description: Account ID
          example: "ACC-67890"
        usage:
          $ref: '#/components/schemas/PartnerOrgUsageData'

    # ==================== Session Schemas ====================
    PartnerOrgSessionRequest:
      type: object
      required:
        - username
      properties:
        username:
          type: string
          description: Username for the session
          example: "ajohnson"
        rbac:
          type: string
          description: Role-based access control setting
          example: "admin"
        theme:
          type: string
          description: UI theme preference
          example: "dark"
          enum:
            - light
            - dark

    GatewaySessionRequest:
      type: object
      properties:
        theme:
          type: string
          description: UI theme preference
          example: "dark"
          enum:
            - light
            - dark

    PartnerOrgSessionResponse:
      type: object
      properties:
        redirectURL:
          type: string
          format: uri
          description: URL to redirect after session creation
          example: "https://portal.example.com/dashboard"
        sessionID:
          type: string
          format: uuid
          description: Created session ID
          example: "123e4567-e89b-12d3-a456-426614174002"

    # ==================== Gateway Schemas ====================
    PartnerOrgCGWCreateReq:
      type: object
      required:
        - deviceName
        - isIpsecEnabled
      properties:
        deviceName:
          type: string
          description: Gateway device name
          example: "Gateway-SF-01"
        Location:
          type: string
          description: Gateway location
          example: "San Francisco Office"
        isIpsecEnabled:
          type: boolean
          description: Whether IPSec is enabled
          example: true
        lanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/LanSubnet'
          description: LAN subnet configurations
        vlanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/VlanSubnet'
          description: VLAN subnet configurations

    LanSubnet:
      type: object
      required:
        - subnet
        - gateway
        - interface
      properties:
        subnet:
          type: string
          description: Subnet CIDR
          example: "192.168.1.0/24"
        gateway:
          type: string
          format: ipv4
          description: Gateway IP address
          example: "192.168.1.1"
        interface:
          type: string
          description: Network interface
          example: "eth0"
        vlanid:
          type: integer
          description: VLAN ID
          example: 100

    VlanSubnet:
      type: object
      required:
        - subnet
        - gateway
        - vlanid
      properties:
        subnet:
          type: string
          description: Subnet CIDR
          example: "192.168.10.0/24"
        gateway:
          type: string
          format: ipv4
          description: Gateway IP address
          example: "192.168.10.1"
        vlanid:
          type: integer
          description: VLAN ID
          example: 10

    PartnerOrgCGWCreateRsp:
      type: object
      properties:
        cgwTag:
          type: string
          description: Gateway tag/name
          example: "gateway-sf-01"
        cgwID:
          type: string
          format: uuid
          description: Gateway ID
          example: "123e4567-e89b-12d3-a456-426614174003"
        authToken:
          type: string
          description: Authentication token for the gateway
          example: "gw-auth-token-123456789"

    PartnerOrgCGWUpdateReq:
      type: object
      properties:
        isIpsecEnabled:
          type: boolean
          description: Whether IPSec is enabled
          example: false
        lanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/LanSubnet'
          description: LAN subnet configurations
        vlanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/VlanSubnet'
          description: VLAN subnet configurations

    PartnerOrgCGWInfo:
      type: object
      properties:
        deviceName:
          type: string
          description: Gateway device name
          example: "Gateway-SF-01"
        location:
          type: string
          description: Gateway location
          example: "San Francisco Office"
        isIpsecEnabled:
          type: boolean
          description: Whether IPSec is enabled
          example: true
        status:
          type: string
          description: Gateway status
          example: "active"
          enum:
            - active
            - inactive
            - pending
        lanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/LanSubnet'
        vlanSubnets:
          type: array
          items:
            $ref: '#/components/schemas/VlanSubnet'

    # ==================== Common Schemas ====================
    StatusCodeRsp:
      type: object
      properties:
        statuscode:
          type: integer
          description: HTTP status code
          example: 200

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: Error message
          example: "Invalid request"
        errorCode:
          type: integer
          description: Application-specific error code
          example: 1001
        message:
          type: string
          description: Detailed error message
          example: "The provided request data is invalid"

  responses:
    BadRequest:
      description: Bad request - Invalid input data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Bad Request"
            errorCode: 400
            message: "Invalid JSON in request body"
    
    Unauthorized:
      description: Unauthorized - Invalid or missing authentication token
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Unauthorized"
            errorCode: 401
            message: "Invalid or expired session token"
    
    NotFound:
      description: Not found - Resource does not exist
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Not Found"
            errorCode: 404
            message: "The requested resource was not found"
    
    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
          example:
            error: "Internal Server Error"
            errorCode: 500
            message: "An unexpected error occurred"
